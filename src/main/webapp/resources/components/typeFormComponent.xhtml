<ui:component
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:cc="http://java.sun.com/jsf/composite"
    xmlns:p="http://primefaces.org/ui" >

    <cc:interface componentType="clientMembership">
        <cc:attribute name="selClient" required="true" type="fr.pfgen.lims.domain.Client" />
        <cc:attribute name="clientTypeList" required="true" type="java.util.List" />
        <cc:attribute name="unit2teams" required="true" type="java.util.Map" />
    </cc:interface>

    <cc:implementation>
        <f:metadata>
            <f:viewAction  />

        </f:metadata>
        <span id="#{cc.clientId}" style="white-space:nowrap">
            <p:panel id="divPanel">

                <h:panelGrid columns="3" id="typePanel" >
                    <p:outputLabel for="clientTypeSelect" value="#{messages.clients_type}" />
                    <p:selectOneMenu id="clientTypeSelect" value="#{cc.client.type}" converter="#{clientTypeConverter}" required="true" style="width: 130px" >
                        <f:selectItems value="#{cc.clientTypeList}" />
                        <p:ajax listener="#{cc.onTypeChanged}"/>
                    </p:selectOneMenu>
                    <p:message for="clientTypeSelect" />
                </h:panelGrid>
                <h:panelGrid columns="3" id="unitPanel" >
                    <p:outputLabel for="unitSelect" value="#{messages.label_researchUnit}" />
                    <p:selectOneMenu id="unitSelect" value="#{cc.client.researchTeam.researchUnit}" valueChangeListener="#{cc.onUnitChange}" converter="#{researchUnitConverter}" required="true" style="width: 130px" >
                        <f:selectItems value="#{cc.unitList}" />
                    </p:selectOneMenu>
                    <p:message for="unitSelect" />
                </h:panelGrid>
                <h:panelGrid columns="3" id="teamPanel" >
                    <p:outputLabel for="teamSelect" value="#{messages.label_researchTeam}" />
                    <p:selectOneMenu id="teamSelect" value="#{cc.client.researchTeam}" converter="#{researchTeamConverter}" required="true" style="width: 130px" >
                        <f:selectItems value="#{cc.teamList}" />
                    </p:selectOneMenu>
                    <p:message for="teamSelect" />
                </h:panelGrid>

            </p:panel>
        </span>  
    </cc:implementation>
</ui:component>

